var dino=dino||{};dino.handle={};
dino.handle=function(){var a=0,b=0;dino.handle.loaded=!1;window.onload=function(){console.log("Initialize Handler");for(var r=document.getElementById("submit-btn"),e=["year","major","school"],p=[],k=0;k<e.length;k++)p[k]=document.getElementById(e[k]);Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){for(var g=b||0,l=this.length;g<l;g++)if(this[g]===a)return g;return-1});window.onresize=function(){if(a!==window.innerHeight||b!==window.innerWidth)a=window.innerHeight,b=window.innerWidth,
dino.viz.draw(window.innerWidth,window.innerHeight)};r.onclick=function(){console.log("Someone hit submit");for(var a=[],b=0;b<e.length;b++){for(var g=[],l=0;l<p[b].length;l++)if(p[b].options[l].selected){var q=dino.help.convertToInt(p[b].options[l].text,b);g.push(q)}a.push(g)}dino.viz.vizController(a)};dino.handle.loaded=!0}};dino.handle();dino=dino||{};dino.help={};
dino.help=function(){dino.help.intToGrade=" Freshman Sophomore Junior Senior Graduate Post-Grad".split(" ");dino.help.intToMajor=";Life Sciences;Business;Engineering and Math;Humanities, Arts, and Sciences;Vocational".split(";");dino.help.intToSchool=";Angelo State University;Centenary College of Louisiana;Lake Superior State University;Lawson state community college;Mountain Empire Community College;Otero Junior College;Pacific Lutheran University;Saint Mary's College of California;Southwestern Community College;Trine University;University of Portland;Virginia Commonwealth University Qatar;Private Universities;Public Universities".split(";");dino.help.majorToStyle=
";stroke-color: #1b5e20;stroke-color: #607d8b;stroke-color: #ff6f00;stroke-color: #e65100;stroke-color: #3e2723".split(";");dino.help.gradeToStyle=";stroke-width: 2;stroke-width: 2;stroke-width: 2;stroke-width: 2;stroke-width: 2;stroke-width: 2".split(";");dino.help.schoolToStyle=";fill-color: rgb(36, 83, 150);fill-color: rgb(138, 21, 40);fill-color: rgb(0, 85, 150);fill-color: rgb(248, 199, 40);fill-color: rgb(221, 0, 54);fill-color: rgb(255, 255, 255);fill-color: rgb(0, 0, 0);fill-color: rgb(216, 31, 38);fill-color: rgb(171, 3, 51);fill-color: rgb(7, 53, 87);fill-color: rgb(51, 1, 112);fill-color: rgb(255, 185, 0);fill-color: rgb(130, 130, 130);fill-color: rgb(98, 130, 41)".split(";");
dino.help.convertToString=function(a,b){switch(b){case 0:return dino.help.intToGrade[a];case 1:return dino.help.intToMajor[a];case 2:return dino.help.intToSchool[a];default:return""}};dino.help.convertToInt=function(a,b){switch(b){case 0:return dino.help.intToGrade.indexOf(a);case 1:return dino.help.intToMajor.indexOf(a);case 2:return dino.help.intToSchool.indexOf(a);default:return""}};dino.help.convertToStyle=function(a,b){switch(b){case 0:return dino.help.gradeToStyle[a];case 1:return dino.help.majorToStyle[a];
case 2:return dino.help.schoolToStyle[a];default:return""}}};dino.help();(function(){for(var a="assert cd clear count countReset debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profileEnd select table time timeEnd timeStamp timeline timelineEnd trace warn".split(" "),b=a.length,r=window.console=window.console||{},e,p=function(){};b--;)e=a[b],r[e]||(r[e]=p)})();dino=dino||{};dino.viz={};
dino.viz=function(){google.load("visualization","1",{packages:["corechart"]});google.setOnLoadCallback(function(){console.log("Initializing vis");k=document.getElementById("legend");s=document.getElementById("overlay");f=k.getContext("2d");p=new google.visualization.ColumnChart(document.getElementById("ex0"));var a=new google.visualization.Query("https://www.google.com/fusiontables/gvizdata?tq=",{sendMethod:"auto"});a.setQuery("SELECT Year, Major, School, AveConfidence FROM 1XaesDw8HBPe2Uvx27FOlmzIzK94Fs6Ot6porY1u1");a.send(function(a){console.log("Sending query");
b=a.getDataTable();console.log("Received "+b.getNumberOfRows()+" entries.");dino.viz.vizController(e)});dino.viz.loaded=!0});dino.viz.loaded=!1;var a,b,r,e=[[-1],[1,2,3,4,5],[11]],p,k,f,s,g,l={width:700,height:400,backgroundColor:{fill:"transparent"},legend:{position:"none"},animation:{startup:!0,duration:10}};dino.viz.vizController=function(q){for(var t=[],d=0;d<q.length;d++)-1!==q[d][0]&&t.push(d);t=google.visualization.data.group(b,t,[{column:3,aggregation:google.visualization.data.avg,type:"number"}]);
a=new google.visualization.DataTable;a.addColumn("string","BarName");a.addColumn("number","Average Confidence");a.addColumn({type:"string",role:"style"});for(var h=[""," in "," at "],k=!1,d=0;d<t.getNumberOfRows();d++){for(var m="",c="",n=0,f=0;f<q.length;f++)if(-1!==q[f][0]){var s=t.getValue(d,n++);-1==q[f].indexOf(s)?k=!0:(m&&(m+=h[f]),m+=dino.help.convertToString(s,f),c&&(c+=";"),c+=dino.help.convertToStyle(s,f))}k?k=!1:(n=t.getValue(d,n),n=parseFloat(Math.round(100*n)/100),a.addRows([[m,n,c]]))}console.log("Creating DataView");
r=new google.visualization.DataView(a);p.draw(r.toDataTable(),l);g=null;dino.viz.drawLegend(q);e=q};dino.viz.draw=function(a,b){var d=Math.max(300,0.91*b-310);d&&(l.height=d);if(d=Math.max(700,0.91*a-310))l.width=d;p.draw(r.toDataTable(),l);dino.viz.drawLegend(e)};dino.viz.drawLegend=function(a){var b=1;f.clearRect(0,0,1E5,1E5);var d=0;if(!g){g=[];for(var h=1;h<a.length;h++){for(var e=0;e<a[h].length;e++)if(-1!==a[h][e]){var m=dino.help.convertToString(a[h][e],h),c=dino.help.convertToStyle(a[h][e],
h);if(c&&m){7<c.length&&"#"==c.charAt(c.length-7)?c=c.substring(c.length-7):15<c.length&&"rgb"==c.substring(12,15)&&(c=c.substring(12));var n={};n.name=m;n.style=c;n.height=b;g.push(n);b+=2;m=f.measureText(m).width+25;d<m&&(d=m)}}b++}}k.height=10*(b-1);k.width=d+10;s.style.top=(l.height-k.height)/2+"px";s.style.left=0.9*l.width+"px";for(h=0;h<g.length;h++)f.beginPath(),f.fillStyle=g[h].style,f.fillRect(10,10*g[h].height,10,10),f.fillStyle="black",f.fillText(g[h].name,25,10*g[h].height+10),f.stroke()}};
dino.viz();
