var dino=dino||{};dino.handle={};
dino.handle=function(){var a=0;dino.handle.loaded=!1;window.onload=function(){console.log("Initialize Handler");for(var b=document.getElementById("submit-btn"),m=["year","major","school"],f=[],c=0;c<m.length;c++)f[c]=document.getElementById(m[c]);Array.prototype.indexOf||(Array.prototype.indexOf=function(a,h){for(var b=h||0,f=this.length;b<f;b++)if(this[b]===a)return b;return-1});window.onresize=function(){var b=window.innerHeight;a!==b&&(a=b,console.log(a),dino.viz.draw(b))};window.onresize();b.onclick=
function(){console.log("Someone hit submit");for(var a=[],b=0;b<m.length;b++){for(var c=[],p=0;p<f[b].length;p++)if(f[b].options[p].selected){var q=dino.help.convertToInt(f[b].options[p].text,b);c.push(q)}a.push(c)}dino.viz.vizController(a)};dino.handle.loaded=!0}};dino.handle();dino=dino||{};dino.help={};
dino.help=function(){dino.help.intToGrade=" Freshman Sophomore Junior Senior Graduate Post-Grad".split(" ");dino.help.intToMajor=";Life Sciences;Business;Engineering and Math;Humanities, Arts, and Sciences;Vocational".split(";");dino.help.intToSchool=";Angelo State University;Centenary College of Louisiana;Lake Superior State University;Lawson state community college;Mountain Empire Community College;Otero Junior College;Pacific Lutheran University;Saint Mary's College of California;Southwestern Community College;Trine University;University of Portland;Virginia Commonwealth University Qatar;Private Universities;Public Universities".split(";");dino.help.majorToStyle=
";stroke-color: #1b5e20;stroke-color: #607d8b;stroke-color: #ff6f00;stroke-color: #e65100;stroke-color: #3e2723".split(";");dino.help.gradeToStyle=";stroke-width: 2;stroke-width: 2;stroke-width: 2;stroke-width: 2;stroke-width: 2;stroke-width: 2".split(";");dino.help.schoolToStyle=";fill-color: rgb(36, 83, 150);fill-color: rgb(138, 21, 40);fill-color: rgb(0, 85, 150);fill-color: rgb(248, 199, 40);fill-color: rgb(221, 0, 54);fill-color: rgb(255, 255, 255);fill-color: rgb(0, 0, 0);fill-color: rgb(216, 31, 38);fill-color: rgb(171, 3, 51);fill-color: rgb(7, 53, 87);fill-color: rgb(51, 1, 112);fill-color: rgb(255, 185, 0);fill-color: rgb(130, 130, 130);fill-color: rgb(98, 130, 41)".split(";");
dino.help.convertToString=function(a,b){switch(b){case 0:return dino.help.intToGrade[a];case 1:return dino.help.intToMajor[a];case 2:return dino.help.intToSchool[a];default:return""}};dino.help.convertToInt=function(a,b){switch(b){case 0:return dino.help.intToGrade.indexOf(a);case 1:return dino.help.intToMajor.indexOf(a);case 2:return dino.help.intToSchool.indexOf(a);default:return""}};dino.help.convertToStyle=function(a,b){switch(b){case 0:return dino.help.gradeToStyle[a];case 1:return dino.help.majorToStyle[a];
case 2:return dino.help.schoolToStyle[a];default:return""}}};dino.help();(function(){for(var a="assert cd clear count countReset debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profileEnd select table time timeEnd timeStamp timeline timelineEnd trace warn".split(" "),b=a.length,m=window.console=window.console||{},f,c=function(){};b--;)f=a[b],m[f]||(m[f]=c)})();dino=dino||{};dino.viz={};
dino.viz=function(){google.load("visualization","1",{packages:["corechart"]});google.setOnLoadCallback(function(){console.log("Initializing vis");n=document.getElementById("legend");t=document.getElementById("overlay");h=n.getContext("2d");c=new google.visualization.ColumnChart(document.getElementById("ex0"));var a=new google.visualization.Query("https://www.google.com/fusiontables/gvizdata?tq=",{sendMethod:"auto"});a.setQuery("SELECT Year, Major, School, AveConfidence FROM 1XaesDw8HBPe2Uvx27FOlmzIzK94Fs6Ot6porY1u1");a.send(function(a){console.log("Sending query");
b=a.getDataTable();console.log("Received "+b.getNumberOfRows()+" entries.");dino.viz.vizController(f)});dino.viz.loaded=!0});dino.viz.loaded=!1;var a,b,m,f=[[-1],[1,2,3,4,5],[11]],c,n,h,t,p={width:700,height:400,backgroundColor:{fill:"transparent"},legend:{position:"none"},animation:{startup:!0,duration:10}};dino.viz.vizController=function(q){for(var r=[],g=0;g<q.length;g++)-1!==q[g][0]&&r.push(g);r=google.visualization.data.group(b,r,[{column:3,aggregation:google.visualization.data.avg,type:"number"}]);
a=new google.visualization.DataTable;a.addColumn("string","BarName");a.addColumn("number","Average Confidence");a.addColumn({type:"string",role:"style"});for(var h=[""," in "," at "],d=!1,g=0;g<r.getNumberOfRows();g++){for(var s="",k="",e=0,l=0;l<q.length;l++)if(-1!==q[l][0]){var n=r.getValue(g,e++);-1==q[l].indexOf(n)?d=!0:(s&&(s+=h[l]),s+=dino.help.convertToString(n,l),k&&(k+=";"),k+=dino.help.convertToStyle(n,l))}d?d=!1:(e=r.getValue(g,e),e=parseFloat(Math.round(100*e)/100),a.addRows([[s,e,k]]))}console.log("Creating DataView");
m=new google.visualization.DataView(a);c.draw(m.toDataTable(),p);dino.viz.drawLegend(q);f=q};dino.viz.draw=function(a){if(a=Math.max(300,0.91*a-310))p.height=a;c.draw(m.toDataTable(),p);dino.viz.drawLegend(f)};dino.viz.drawLegend=function(a){var b=1;h.clearRect(0,0,1E3,1E3);for(var g=[],f=0,d=1;d<a.length;d++){for(var c=0;c<a[d].length;c++)if(-1!==a[d][c]){var k=dino.help.convertToString(a[d][c],d),e=dino.help.convertToStyle(a[d][c],d);if(e&&k){7<e.length&&"#"==e.charAt(e.length-7)?e=e.substring(e.length-
7):15<e.length&&"rgb"==e.substring(12,15)&&(e=e.substring(12));var l={};l.name=k;l.style=e;l.height=b;g.push(l);b+=2;k=h.measureText(k).width+25;f<k&&(f=k)}}b++}n.height=10*(b-1);n.width=f+10;t.style.top=(p.height-n.height)/2+"px";for(d=0;d<g.length;d++)h.beginPath(),h.fillStyle=g[d].style,h.fillRect(10,10*g[d].height,10,10),h.fillStyle="black",h.fillText(g[d].name,25,10*g[d].height+10),h.stroke()}};dino.viz();
