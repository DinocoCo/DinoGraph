var dino=dino||{};dino.handle={};
dino.handle=function(){dino.handle.loaded=!1;window.onload=function(){console.log("Initialize Handler");for(var a=document.getElementById("submit-btn"),c=["year","major","school"],h=[],d=0;d<c.length;d++)h[d]=document.getElementById(c[d]);Array.prototype.indexOf||(Array.prototype.indexOf=function(a,c){for(var b=c||0,d=this.length;b<d;b++)if(this[b]===a)return b;return-1});window.onresize=function(){this.resizeTO&&clearTimeout(this.resizeTO);this.resizeTO=setTimeout(function(){dino.viz.draw()},100)};
a.onclick=function(){console.log("Someone hit submit");for(var a=[],d=0;d<c.length;d++){for(var b=[],p=0;p<h[d].length;p++)if(h[d].options[p].selected){var m=dino.help.convertToInt(h[d].options[p].text,d);b.push(m)}a.push(b)}dino.viz.vizController(a)};dino.handle.loaded=!0}};dino.handle();dino=dino||{};dino.help={};
dino.help=function(){dino.help.intToGrade=" Freshman Sophomore Junior Senior Graduate Post-Grad".split(" ");dino.help.intToMajor=";Life Sciences;Business;Engineering and Math;Humanities, Arts, and Sciences;Vocational".split(";");dino.help.intToSchool=";Angelo State University;Centenary College of Louisiana;Lake Superior State University;Lawson state community college;Mountain Empire Community College;Otero Junior College;Pacific Lutheran University;Saint Mary's College of California;Southwestern Community College;Trine University;University of Portland;Virginia Commonwealth University Qatar;Private Universities;Public Universities".split(";");dino.help.majorToStyle=
";stroke-color: #1b5e20;stroke-color: #607d8b;stroke-color: #ff6f00;stroke-color: #e65100;stroke-color: #3e2723".split(";");dino.help.gradeToStyle=";stroke-width: 2;stroke-width: 2;stroke-width: 2;stroke-width: 2;stroke-width: 2;stroke-width: 2".split(";");dino.help.schoolToStyle=";fill-color: rgb(36, 83, 150);fill-color: rgb(138, 21, 40);fill-color: rgb(0, 85, 150);fill-color: rgb(248, 199, 40);fill-color: rgb(221, 0, 54);fill-color: rgb(255, 255, 255);fill-color: rgb(0, 0, 0);fill-color: rgb(216, 31, 38);fill-color: rgb(171, 3, 51);fill-color: rgb(7, 53, 87);fill-color: rgb(51, 1, 112);fill-color: rgb(255, 185, 0);fill-color: rgb(130, 130, 130);fill-color: rgb(98, 130, 41)".split(";");
dino.help.convertToString=function(a,c){switch(c){case 0:return dino.help.intToGrade[a];case 1:return dino.help.intToMajor[a];case 2:return dino.help.intToSchool[a];default:return""}};dino.help.convertToInt=function(a,c){switch(c){case 0:return dino.help.intToGrade.indexOf(a);case 1:return dino.help.intToMajor.indexOf(a);case 2:return dino.help.intToSchool.indexOf(a);default:return""}};dino.help.convertToStyle=function(a,c){switch(c){case 0:return dino.help.gradeToStyle[a];case 1:return dino.help.majorToStyle[a];
case 2:return dino.help.schoolToStyle[a];default:return""}}};dino.help();(function(){for(var a="assert cd clear count countReset debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profileEnd select table time timeEnd timeStamp timeline timelineEnd trace warn".split(" "),c=a.length,h=window.console=window.console||{},d,u=function(){};c--;)d=a[c],h[d]||(h[d]=u)})();dino=dino||{};dino.viz={};
dino.viz=function(){google.load("visualization","1",{packages:["corechart"]});google.setOnLoadCallback(function(){var a=Date.now();console.log("Initializing vis");l=document.getElementById("legend");p=document.getElementById("overlay");b=l.getContext("2d");r=document.getElementById("ex0");q.height=Math.max(300,0.91*window.innerHeight-310);q.width=Math.max(700,0.91*window.innerWidth-310);u=new google.visualization.ColumnChart(document.getElementById("ex0"));var m=new google.visualization.Query("https://www.google.com/fusiontables/gvizdata?tq=",{sendMethod:"auto"});
m.setQuery("SELECT Year, Major, School, AveConfidence FROM 1XaesDw8HBPe2Uvx27FOlmzIzK94Fs6Ot6porY1u1");m.send(function(b){console.log("Sending query");c=b.getDataTable();console.log("Received "+c.getNumberOfRows()+" entries.");dino.viz.vizController(d);console.log("Initializing took "+(Date.now()-a)+" ms.")});dino.viz.loaded=!0});dino.viz.loaded=!1;var a,c,h,d=[[-1],[1,2,3,4,5],[11]],u,l,b,p,m,r,q={backgroundColor:{fill:"transparent"},legend:{position:"none"},animation:{startup:!0,duration:10}};dino.viz.vizController=
function(b){for(var p=Date.now(),s=[],n=0;n<b.length;n++)-1!==b[n][0]&&s.push(n);s=google.visualization.data.group(c,s,[{column:3,aggregation:google.visualization.data.avg,type:"number"}]);a=new google.visualization.DataTable;a.addColumn("string","BarName");a.addColumn("number","Average Confidence");a.addColumn({type:"string",role:"style"});for(var e=[""," in "," at "],g=!1,n=0;n<s.getNumberOfRows();n++){for(var k="",f="",t=0,l=0;l<b.length;l++)if(-1!==b[l][0]){var r=s.getValue(n,t++);-1==b[l].indexOf(r)?
g=!0:(k&&(k+=e[l]),k+=dino.help.convertToString(r,l),f&&(f+=";"),f+=dino.help.convertToStyle(r,l))}g?g=!1:(t=s.getValue(n,t),t=parseFloat(Math.round(100*t)/100),a.addRows([[k,t,f]]))}console.log("Done processing table "+(Date.now()-p)+" ms later");p=Date.now();console.log("Creating DataView");h=new google.visualization.DataView(a);u.draw(h.toDataTable(),q);m=null;dino.viz.drawLegend(b);d=b;console.log("Done drawing table "+(Date.now()-p)+" ms later")};dino.viz.draw=function(){q.height=r.clientHeight;
q.width=r.clientWidth;u.draw(h.toDataTable(),q);dino.viz.drawLegend(d)};dino.viz.drawLegend=function(a){var d=Date.now(),c=1;b.clearRect(0,0,l.width,l.height);var n=0;m=[];for(var e=1;e<a.length;e++){var g={};g.height=c;g.title=!0;1==e&&(g.name="Major Category (Outline color)");2==e&&(g.name="University (Bar color)");m.push(g);var c=c+2,k=b.measureText(g.name).width;n<k&&(n=k,longestLegendStr=g.name);for(g=0;g<a[e].length;g++)if(-1!==a[e][g]){var k=dino.help.convertToString(a[e][g],e),f=dino.help.convertToStyle(a[e][g],
e);if(f&&k){7<f.length&&"#"==f.charAt(f.length-7)?f=f.substring(f.length-7):15<f.length&&"rgb"==f.substring(12,15)&&(f=f.substring(12));var h={};h.name=k;h.style=f;h.height=c;m.push(h);c+=2;k=b.measureText(k).width+15;n<k&&(n=k)}}c++}l.height=10*(c-1);l.width=n+20;console.log("Done processing legend "+(Date.now()-d)+" ms later");d=Date.now();p.style.top=(q.height-l.height)/2+"px";p.style.left=0.9*q.width+"px";for(e=0;e<m.length;e++)b.beginPath(),b.fillStyle=m[e].style,b.font="10px",a=10,m[e].title||
(b.fillRect(10,10*m[e].height,10,10),a=25),b.fillStyle="black",b.fillText(m[e].name,a,10*m[e].height+10),b.stroke();console.log("Done drawing legend "+(Date.now()-d)+" ms later")}};dino.viz();
